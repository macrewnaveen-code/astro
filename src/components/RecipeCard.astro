---
/**
 * RecipeCard Component
 * 
 * Displays a recipe card with image, title, meta info
 * Used on: Home page, category pages, related recipes section
 * 
 * Props:
 * - title (string): Recipe name
 * - slug (string): Recipe URL slug
 * - image (string): Featured image URL
 * - excerpt (string): Short description
 * - prepTime (number): Minutes to prepare
 * - cookTime (number): Minutes to cook
 * - servings (number): Number of servings
 * - rating (number, 0-5): Average rating
 * - ratingCount (number): Number of ratings
 */

interface Props {
  title: string;
  slug: string;
  image: string;
  excerpt: string;
  prepTime?: number;
  cookTime?: number;
  servings?: number;
  rating?: number;
  ratingCount?: number;
  featured?: boolean;
}

const {
  title,
  slug,
  image,
  excerpt,
  prepTime = 0,
  cookTime = 0,
  servings = 4,
  rating = 0,
  ratingCount = 0,
  featured = false
} = Astro.props;

const totalTime = prepTime + cookTime;
const recipeUrl = `/${slug}/`;

// Render star rating
const renderStars = (rate: number) => {
  const stars = [];
  for (let i = 1; i <= 5; i++) {
    stars.push(i <= Math.floor(rate) ? '‚òÖ' : '‚òÜ');
  }
  return stars.join('');
};
---

<a href={recipeUrl} class={`recipe-card ${featured ? 'featured' : ''}`}>
  <div class="recipe-card-image">
    <img 
      src={image} 
      alt={title}
      loading="lazy"
      width="400"
      height="300"
    />
    {featured && <div class="featured-badge">Featured</div>}
  </div>
  
  <div class="recipe-card-content">
    <h3 class="recipe-card-title">{title}</h3>
    
    <p class="recipe-card-excerpt">{excerpt}</p>
    
    <div class="recipe-card-meta">
      {prepTime > 0 && (
        <div class="meta-item">
          <span class="icon">‚è±Ô∏è</span>
          <span>{prepTime}m prep</span>
        </div>
      )}
      
      {cookTime > 0 && (
        <div class="meta-item">
          <span class="icon">üî•</span>
          <span>{cookTime}m cook</span>
        </div>
      )}
      
      <div class="meta-item">
        <span class="icon">üçΩÔ∏è</span>
        <span>{servings} servings</span>
      </div>
    </div>
    
    {rating > 0 && (
      <div class="recipe-card-rating">
        <span class="stars">{renderStars(rating)}</span>
        <span class="rating-count">({ratingCount})</span>
      </div>
    )}
  </div>
</a>

<style>
  .recipe-card {
    display: flex;
    flex-direction: column;
    height: 100%;
    background: #fff;
    border-radius: 12px;
    overflow: hidden;
    text-decoration: none;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    border: 1px solid #e9ecef;
  }

  .recipe-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
    border-color: #0066cc;
  }

  .recipe-card.featured {
    border: 2px solid #0066cc;
  }

  /* Image Section */
  .recipe-card-image {
    position: relative;
    width: 100%;
    height: 200px;
    overflow: hidden;
    background: #f0f0f0;
  }

  .recipe-card-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .recipe-card:hover .recipe-card-image img {
    transform: scale(1.05);
  }

  .featured-badge {
    position: absolute;
    top: 12px;
    right: 12px;
    background: #ff6b35;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    font-size: 0.85rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  /* Content Section */
  .recipe-card-content {
    flex: 1;
    padding: 1.5rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .recipe-card-title {
    font-size: 1.25rem;
    font-weight: 700;
    color: #1a1a1a;
    margin: 0;
    line-height: 1.3;
  }

  .recipe-card:hover .recipe-card-title {
    color: #0066cc;
  }

  .recipe-card-excerpt {
    font-size: 0.95rem;
    color: #666;
    margin: 0;
    line-height: 1.5;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    flex-grow: 1;
  }

  /* Meta Information */
  .recipe-card-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem;
    font-size: 0.85rem;
    color: #666;
    margin-top: auto;
  }

  .meta-item {
    display: flex;
    align-items: center;
    gap: 0.4rem;
  }

  .meta-item .icon {
    font-size: 1rem;
  }

  /* Rating Section */
  .recipe-card-rating {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
  }

  .stars {
    color: #ffc107;
    letter-spacing: 2px;
  }

  .rating-count {
    color: #999;
  }

  /* Mobile Responsive */
  @media (max-width: 768px) {
    .recipe-card-image {
      height: 160px;
    }

    .recipe-card-content {
      padding: 1rem;
      gap: 0.75rem;
    }

    .recipe-card-title {
      font-size: 1.1rem;
    }

    .recipe-card-excerpt {
      font-size: 0.9rem;
    }

    .recipe-card-meta {
      gap: 0.75rem;
    }
  }
</style>
