---
// Giscus Comments Component - Client-side SaaS comments
// Replaces Payload comments to meet client requirements
---

<div id="comments-section" class="mt-8">
  <h3 class="text-2xl font-bold mb-4">Comments</h3>

  <!-- Giscus Comments Widget -->
  <div class="giscus-comments">
    <script
      src="https://giscus.app/client.js"
      data-repo="your-username/your-repo"
      data-repo-id="your-repo-id"
      data-category="Comments"
      data-category-id="your-category-id"
      data-mapping="pathname"
      data-strict="0"
      data-reactions-enabled="1"
      data-emit-metadata="0"
      data-input-position="bottom"
      data-theme="light"
      data-lang="en"
      crossorigin="anonymous"
      async>
    </script>
  </div>

  <!-- Fallback message while loading -->
  <div id="comments-loading" class="text-gray-500 italic">
    Loading comments...
  </div>
</div>

<style>
  /* Hide loading message when Giscus loads */
  .giscus-comments:has(.giscus) ~ #comments-loading {
    display: none;
  }

  /* Giscus styling */
  .giscus {
    margin-top: 1rem;
  }

  .giscus-frame {
    border-radius: 8px;
    border: 1px solid #e5e7eb;
  }
</style>

<script>
  // Client-side script to handle comments loading
  document.addEventListener('DOMContentLoaded', function() {
    const commentsSection = document.getElementById('comments-section');

    // Add GDPR consent check if needed
    // This is where you would check for cookie consent before loading comments

    // Giscus will load automatically via the script tag above
    // No server-side logic required - fully client-side SaaS solution
  });
</script>